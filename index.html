<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>StarsBox — Главная</title>
  <link rel="stylesheet" href="styles.css" />

  <!-- Мини-стили модалки -->
  <style>
    .sc-modal-backdrop{position:fixed;inset:0;z-index:1000;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.5)}
    .sc-modal-card{background:#fff;color:#111;max-width:420px;width:calc(100% - 32px);border-radius:16px;padding:16px;box-shadow:0 10px 30px rgba(0,0,0,.2)}
    .sc-modal-card h3{margin:0 0 8px;font-size:18px}
    .sc-modal-actions{display:flex;justify-content:flex-end;margin-top:12px}
    .sc-btn{background:#111;color:#fff;border:none;border-radius:12px;padding:8px 14px;cursor:pointer}
    .sc-hidden{display:none}
  </style>
</head>
<body class="home-page">
  <!-- ===== Топбар ===== -->
  <header class="topbar">
    <div class="topbar__inner">
      <img id="userPhoto" class="avatar" src="assets/icons/logo17.png" alt="Профиль">
      <div class="userbox">
        <div id="userFullName" class="userbox__name">—</div>
        <div id="userUsername" class="userbox__username">—</div>
      </div>

      <a
        id="starsCoinBtn"
        class="starscoin-balance"
        href="pages/starscoin/index.html"
        aria-label="Открыть баланс StarsCoin"
      >
        <span class="sc-icon" aria-hidden="true">
          <img src="assets/icons/icon3.png" alt="">
        </span>

        <span id="starsCoinText" class="sc-text">0 COIN</span>

        <span class="sc-plus" aria-hidden="true">+</span>
      </a>
    </div>
  </header>

  <!-- ===== Контент ===== -->
  <main class="wrap" id="pageRoot">
    <!-- Новости -->
    <section class="news">
      <h2 class="section-title">Новости и акции</h2>

      <div class="news-rail" id="newsRail">
        <a class="news-card" href="./pages/stars/index.html" aria-label="Покупайте звезды">
          <span class="news-card__bg" style="--img:url('./assets/backgrounds/stars3.png')"></span>
          <span class="news-card__title">Покупайте звезды</span>
        </a>

        <a class="news-card" href="./pages/steam/index.html" aria-label="Пополняйте Steam">
          <span class="news-card__bg" style="--img:url('./assets/backgrounds/steam.jpg')"></span>
          <span class="news-card__title">Пополняйте Steam</span>
        </a>

        <a class="news-card" href="./pages/ton/index.html" aria-label="Покупайте TON">
          <span class="news-card__bg" style="--img:url('./assets/backgrounds/ton.png')"></span>
          <span class="news-card__title">Покупайте Ton</span>
        </a>

        <a class="news-card" href="./pages/gifts/index.html" aria-label="Подарки для друзей">
          <span class="news-card__bg" style="--img:url('./assets/backgrounds/gifts.png')"></span>
          <span class="news-card__title">Подарки для друзей</span>
        </a>
      </div>

      <div class="section-divider" aria-hidden="true"></div>
    </section>

    <!-- Панели продуктов -->
    <section class="product-panels" aria-label="Выберите продукт">
      <h2 class="sec-title">Выберите продукт</h2>

      <div class="panels-grid">
        <!-- Звезды -->
        <a class="panel panel--lg panel--stars" href="pages/stars/index.html">
          <div class="panel__inner">
            <div>
              <div class="panel__title">Купить звезды</div>
              <div class="panel__sub">Быстрое пополнение</div>
            </div>
            <div class="panel__pill">
              <img src="assets/icons/icon3.png" alt="">
            </div>
          </div>
        </a>

        <!-- TON -->
        <a class="panel panel--sm panel--ton" href="pages/ton/index.html">
          <div class="panel__inner">
            <div>
              <div class="panel__title">Купить TON</div>
              <div class="panel__sub">Валюта Telegram</div>
            </div>
            <div class="panel__pill">
              <img src="assets/icons/icon17.png" alt="">
            </div>
          </div>
        </a>

        <!-- Подарки -->
        <a class="panel panel--md panel--gifts" href="pages/gifts/index.html">
          <div class="panel__inner">
            <div>
              <div class="panel__title">Подарки</div>
              <div class="panel__sub">Себе и друзьям</div>
            </div>
            <div class="panel__pill">
              <img src="assets/icons/icon15.png" alt="">
            </div>
          </div>
        </a>

        <!-- Premium -->
        <a class="panel panel--md panel--premium" href="pages/premium/index.html">
          <div class="panel__inner">
            <div>
              <div class="panel__title">Premium</div>
              <div class="panel__sub">Подписка в два клика</div>
            </div>
            <div class="panel__pill">
              <img src="assets/icons/icon16.png" alt="">
            </div>
          </div>
        </a>

        <!-- Steam (на всю ширину) -->
        <a class="panel panel--full panel--steam" href="pages/steam/index.html">
          <div class="panel__inner">
            <div>
              <div class="panel__title">Пополняйте Steam</div>
              <div class="panel__sub">По самому выгодному курсу</div>
            </div>
            <div class="panel__pill">
              <img src="assets/icons/icon4.png" alt="">
            </div>
          </div>
        </a>

        <!-- Referral (на всю ширину, как Steam) -->
        <a class="panel panel--full panel--ref" href="pages/ref/index.html" aria-label="Реферальная программа">
          <div class="panel__inner">
            <div>
              <div class="panel__title">Реферальная программа</div>
              <div class="panel__sub">Зарабатывай с нами</div>
            </div>
            <div class="panel__pill">
              <img src="assets/icons/акции.png" alt="">
            </div>
          </div>
        </a>
      </div>
    </section>
  </main>

  <!-- Модалка StarsCoin -->
  <div id="starscoinModal" class="sc-modal-backdrop sc-hidden" role="dialog" aria-modal="true" aria-labelledby="scModalTitle">
    <div class="sc-modal-card">
      <h3 id="scModalTitle">Раздел StarsCoin недоступен</h3>
      <p>Пополнение <b>StarsCoin</b> сейчас в разработке и временно закрыто. Вернём доступ в ближайшее время.</p>
      <div class="sc-modal-actions">
        <button id="scModalClose" class="sc-btn" type="button">Ок</button>
      </div>
    </div>
  </div>

  <!-- Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- Локальный JS: перехват клика по пилюле и показ модалки -->
  <script>
    (function () {
      const pill = document.getElementById("starsCoinBtn");
      const modal = document.getElementById("starscoinModal");
      const btnClose = document.getElementById("scModalClose");

      function openModal() {
        modal.classList.remove("sc-hidden");
        document.body.style.overflow = "hidden";
        // лёгкая тактильная отдача в Telegram WebApp (не критично)
        try { Telegram?.WebApp?.HapticFeedback?.impactOccurred("light"); } catch {}
        // блокируем swipe-закрытие мини-аппа поверх модалки
        try { Telegram?.WebApp?.enableClosingConfirmation(); } catch {}
      }

      function closeModal() {
        modal.classList.add("sc-hidden");
        document.body.style.overflow = "";
        try { Telegram?.WebApp?.disableClosingConfirmation(); } catch {}
      }

      pill.addEventListener("click", function (e) {
        // Блокируем переход по href
        e.preventDefault();
        e.stopPropagation();
        openModal();
      });

      btnClose.addEventListener("click", closeModal);

      // Клик по фону — тоже закрывает
      modal.addEventListener("click", (e) => {
        if (e.target === modal) closeModal();
      });

      // Esc — закрыть
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && !modal.classList.contains("sc-hidden")) closeModal();
      });
    })();
  </script>

  <script src="app.js"></script>
</body>
</html>
