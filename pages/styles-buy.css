/* =========================
   BUY PAGE — тема / переменные
   ВСЁ ограничено .buy-page → не трогаем главную
========================= */
.buy-page{
  /* колонка формы — одинаковая на всех устройствах */
  --form-w: clamp(320px, 92vw, 520px);

  /* поля ввода */
  --fields-gap: 12px;
  --field-bg: #fff;
  --field-text: #000;
  --field-ph: #9aa0a6;
  --field-brd: #d9dbe0;
  --field-radius: 30px;
  --field-focus-brd: #030056;
  --field-focus-glow: rgba(255,255,255,.2);
  --field-invalid-brd: #000000;
  --field-invalid-glow: rgb(255, 255, 255);

  /* пакеты */
  --pkg-gap: 10px;
  --pkg-bg: rgba(255,255,255,.06);
  --pkg-text: #fff;
  --pkg-brd: rgba(255,255,255,.35);
  --pkg-radius: 30px;

  /* пакет — выбранный */
  --pkg-selected-bg: #fff;
  --pkg-selected-text: #000;
  --pkg-selected-brd: #fff;

  /* радио */
  --radio-size: 12px;
  --radio-brd: #9aa0a6;
  --radio-dot: #fff;
  --radio-focus: rgba(255,255,255,.35);

  /* кнопка «Показать все пакеты» */
  --toggle-brd: #fff;
  --toggle-text: #fff;
  --toggle-bg: transparent;
  --toggle-active-bg: #fff;   /* только нажатие */
  --toggle-active-text: #000;

  /* блок оферты */
  --legal-bg: rgba(255,255,255,.06);
  --legal-brd: var(--card-brd);
  --legal-text: var(--muted);

  /* иконки платёжных кнопок — РЕСПОНСИВ без абсолютов */
  --pay-ic-size: 22px;
  --pay-ic-gap: 12px; /* зазор между иконкой и текстом */
  --pay-ic-opacity: 1;
  --pay-ic-filter: none;
  --ic-sbp:    url("../assets/icons/icon10.png");
  --ic-crypto: url("../assets/icons/icon9.png");

  margin: 0 auto;
  max-width: var(--form-w);
  color: var(--text);
}

/* Заголовки/подзаголовки страницы */
.buy-page .buy-title{ margin:0 0 6px; font: 800 22px/1.2 var(--font-accent); }
.buy-page .buy-sub{   margin:0 0 14px; color:var(--muted); }

/* Заголовок над username + действия справа */
.buy-page .field-head{
  max-width: var(--form-w);
  margin: 0 auto 6px;
  display:flex; align-items:center; justify-content:space-between;
  padding: 0 4px;
}
.buy-page .field-title{ font: 400 18px/1 var(--font-ui); color:#fff; opacity:.9; }
.buy-page .field-actions{ display:flex; align-items:center; gap:8px; }
.buy-page .text-link{
  appearance:none; border:0; background:transparent; padding:4px 6px;
  font: 400 14px/1 var(--font-ui);
  color: #cfe0ff; cursor:pointer; border-radius: 8px;
}
.buy-page .text-link:active{ transform: translateY(1px); }

/* ---------- Поля ввода ---------- */
.buy-page .stars-username-container,
.buy-page .stars-qty-container{
  position:relative;
  max-width: var(--form-w);
  margin:0 auto var(--fields-gap);
  display:flex; align-items:center;
}
.buy-page .stars-username-input,
.buy-page .stars-qty-input{
  width:100%; height:40px;
  padding-left:50px; padding-right:12px;
  font-size:13px; letter-spacing:1.05px;
  background: var(--field-bg);
  color: var(--field-text);
  border: 1px solid var(--field-brd);
  border-radius: var(--field-radius);
  box-shadow: inset 0 0 0 0 transparent;
  transition: border-color .2s, box-shadow .2s;
}
.buy-page .stars-username-input::placeholder,
.buy-page .stars-qty-input::placeholder{ color: var(--field-ph); }

/* наш фокус (без системных красных/оранжевых) */
.buy-page .stars-username-input:focus,
.buy-page .stars-qty-input:focus,
.buy-page .stars-username-input:focus-visible,
.buy-page .stars-qty-input:focus-visible{
  outline: none !important;
  border-color: var(--field-focus-brd) !important;
  box-shadow: 0 0 8px var(--field-focus-glow) !important;
}
.buy-page input{ -webkit-tap-highlight-color: transparent; }
.buy-page input:-moz-focusring{ outline: none; }
.buy-page input::-moz-focus-inner{ border:0; }
.buy-page *:focus-visible{ outline:none; }

/* ошибка только когда поле не пустое */
.buy-page .stars-username-input:invalid:not(:placeholder-shown),
.buy-page .stars-qty-input:invalid:not(:placeholder-shown),
.buy-page .stars-username-input:-moz-ui-invalid:not(:placeholder-shown),
.buy-page .stars-qty-input:-moz-ui-invalid:not(:placeholder-shown){
  border-color: var(--field-invalid-brd) !important;
  box-shadow: inset 0 0 0 2px var(--field-invalid-glow) !important;
}
.buy-page .stars-username-input:placeholder-shown:invalid,
.buy-page .stars-qty-input:placeholder-shown:invalid{
  border-color: var(--field-brd);
  box-shadow: none;
}
/* явный класс ошибки из JS */
.buy-page .input--error{
  border-color: var(--field-invalid-brd) !important;
  box-shadow: inset 0 0 0 3px var(--field-invalid-glow) !important;
}

/* иконки в полях */
.buy-page .stars-username-logo,
.buy-page .stars-field-icon{
  position:absolute; left:20px; top:50%; transform:translateY(-50%);
  width:20px; height:20px;
}

/* подпись перед пакетами */
.buy-page .stars-qty-subtitle{
  max-width: var(--form-w); margin: calc(var(--fields-gap) * 0.9) auto;
  text-align:center; color:#ddd; font-size:14px; opacity:.9;
}

/* ---------- Пакеты ---------- */
.buy-page .stars-packages,
.buy-page .stars-packages-hidden{
  max-width: var(--form-w);
  margin:8px auto 0;
  display:block;
}
.buy-page .stars-packages > .stars-package-item:not(:first-child),
.buy-page .stars-packages-hidden > .stars-package-item:not(:first-child){
  margin-top: var(--pkg-gap);
}

.buy-page .stars-package-item{
  display:grid; grid-template-columns:22px 24px 1fr auto;
  align-items:center; column-gap:10px;
  width:100%; padding:12px 14px; border-radius: var(--pkg-radius);
  background: var(--pkg-bg); color: var(--pkg-text);
  border:1px solid var(--pkg-brd);
  font-size:15px; letter-spacing:1.1px;
  transition: background-color .2s, color .2s, border-color .2s, transform .2s;
}
.buy-page .stars-package-item.is-selected{
  background: var(--pkg-selected-bg);
  color: var(--pkg-selected-text);
  border-color: var(--pkg-selected-brd);
}

/* радио */
.buy-page .stars-package-radio{
  appearance:none; -webkit-appearance:none;
  width: var(--radio-size); height: var(--radio-size);
  border:2px solid var(--radio-brd); border-radius:50%;
  background:transparent; position:relative; cursor:pointer;
  transition: box-shadow .2s, border-color .2s;
}
.buy-page .stars-package-radio:focus-visible{ outline:none; box-shadow:0 0 0 4px var(--radio-focus); }
.buy-page .stars-package-radio:checked{ border-color: var(--pkg-selected-brd); }
.buy-page .stars-package-radio:checked::after{
  content:""; position:absolute; inset:3px; background: var(--radio-dot); border-radius:50%;
}
.buy-page .stars-package-icon{ width:15px; height:15px; justify-self:center; }

/* скрытые пакеты */
.buy-page .stars-packages-hidden{ display:none; opacity:0; transition:opacity .25s; }
.buy-page .stars-packages-hidden.is-open{ display:block; opacity:1; }

/* Кнопка показать/свернуть — без залипания состояния */
.buy-page .stars-toggle{
  margin: var(--pkg-gap) auto 0;
  width:100%; max-width: var(--form-w); padding:10px 20px;
  border-radius:25px; text-align:center;
  border:1px solid var(--toggle-brd); color: var(--toggle-text); background: var(--toggle-bg);
  font-size:13px; letter-spacing:1.1px;
  transition: transform .12s;
}
.buy-page .stars-toggle:focus{ outline:none; box-shadow:none; }
.buy-page .stars-toggle:active{
  background: var(--toggle-active-bg);
  color: var(--toggle-active-text);
  transform:scale(.98);
}

/* ---------- Итого ---------- */
.buy-page .stars-total-line{
  max-width: var(--form-w); margin:16px auto 0;
  display:flex; flex-direction:column; align-items:center; gap:0;
}
.buy-page .stars-total-label{ font-size:14px; color:#fff; opacity:.8; }
.buy-page .stars-total-input{
  width:100%; background:transparent; color:#fff; font-size:20px; text-align:center;
  border:none; border-bottom:1px solid #fff; padding:10px 8px 8px; outline:none; caret-color:transparent; user-select:none;
}

/* ===== ПЛАТЁЖНЫЕ КНОПКИ — иконка справа, привязана к тексту ===== */

/* общие переменные (можно менять где-то выше в .buy-page) */
.buy-page{
  --pay-ic-size: 22px;         /* размер иконки */
  --pay-ic-gap: 5px;          /* расстояние от текста до иконки = 20px */
  --pay-ic-opacity: 1;
  --pay-ic-filter: none;

  /* пути к иконкам */
  --ic-sbp:    url("../assets/icons/icon10.png");
  --ic-crypto: url("../assets/icons/icon9.png");
}

/* контейнер кнопок — одна колонка, на всю ширину формы */
.buy-page .stars-payment-actions{
  max-width: var(--form-w);
  margin:18px auto 0;
  display:grid;
  grid-template-columns:1fr;
  gap: var(--pkg-gap);
}

/* сама кнопка: центрируем "текст + иконка" как ЕДИНЫЙ блок */
.buy-page .stars-payment-actions .stars-btn{
  display:inline-flex;                 /* ← важное: текст и иконка — в одном флекс-блоке */
  align-items:center;
  justify-content:center;              /* центрируем группу целиком */
  gap: var(--pay-ic-gap);              /* зазор между текстом и иконкой = 20px */
  white-space: nowrap;                 /* чтобы иконка не "падала" на следующую строку */
  width:100%;
  padding:12px 16px;
  border-radius:12px;
  border:1px solid var(--card-brd);
  background:rgba(255,255,255,.9);
  color:#0b0e1b;
  font-weight:400;
  text-align:center;
  cursor:pointer;
  transition: transform .15s ease;
}
.buy-page .stars-payment-actions .stars-btn:active{ transform: scale(.98); }
.buy-page .stars-payment-actions .stars-btn[disabled]{ opacity:.6; pointer-events:none; }

/* иконка как flex-элемент справа от текста (внутри той же кнопки) */
.buy-page .stars-payment-actions .stars-btn::after{
  content:"";
  flex: 0 0 var(--pay-ic-size);
  width: var(--pay-ic-size);
  height: var(--pay-ic-size);
  background-repeat:no-repeat;
  background-position:center;
  background-size:contain;
  opacity: var(--pay-ic-opacity);
  filter: var(--pay-ic-filter);
  pointer-events:none;

  /* fallback, если вдруг gap в flex не поддерживается старым WebView */
  margin-left: var(--pay-ic-gap);
}

/* назначаем разные иконки по методу оплаты */
.buy-page .stars-btn[data-method="sbp_qr"]::after { background-image: var(--ic-sbp); }
.buy-page .stars-btn[data-method="crypto"]::after { background-image: var(--ic-crypto); }

/* (опционально) на очень узких экранах можно дать кнопкам перенос текста.
   Тогда иконка всё равно останется «рядом», но может уйти на новую строку.
   Убери комментарий, если нужно:
@media (max-width: 340px){
  .buy-page .stars-payment-actions .stars-btn{ white-space: normal; }
}

/* ---------- Блок оферты ---------- */
.buy-page .buy-legal-box{
  margin: var(--pkg-gap) auto 0; padding:10px 12px; max-width: var(--form-w);
  background: var(--legal-bg); border:1px solid var(--legal-brd); border-radius:12px;
}
.buy-page .buy-legal{ margin:0; color: var(--legal-text); font-size:12px; text-align:center; }
.buy-page .buy-legal a,
.buy-page .buy-legal .buy-legal-link{
  color: inherit; text-decoration: underline;
  text-decoration-thickness: from-font; text-underline-offset: 2px;
  cursor: pointer;
}

/* =========================
   АДАПТИВ
========================= */
/* узкие экраны (старые iPhone SE и подобные) */
@media (max-width: 360px){
  .buy-page{ --field-radius: 22px; --pkg-radius: 22px; --pay-ic-size: 20px; }
  .buy-page .stars-package-item{ padding:10px 12px; font-size:14px; }
  .buy-page .stars-total-input{ font-size:18px; }
}

/* широкие (планшеты/десктоп) — чуть крупнее типографика, но сетка та же */
@media (min-width: 600px){
  .buy-page{ --pay-ic-size: 24px; }
  .buy-page .stars-package-item{ font-size:16px; }
  .buy-page .stars-total-input{ font-size:22px; }
}

/* ===== Локальная панель страницы (назад + заголовок) ===== */
.page-bar{
  max-width: var(--column-w, clamp(360px, 92vw, 520px));
  margin: 0 auto 20px;
  padding: 0 var(--page-xpad, 5px);
  display: flex;
  align-items: center;
  gap: 15px;
}

/* минималистичная «шляпка» стрелки без ножки */
.back-btn{
  appearance: none;
  border: 1px solid var(--card-brd);
  background: rgba(255,255,255,.06);
  width: 36px; height: 36px;
  border-radius: 12px;
  display: grid; place-items: center;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
}
.back-btn::before{
  content: "";
  width: 12px; height: 12px;
  border-left: 2px solid var(--text);
  border-top: 2px solid var(--text);
  transform: translateX(2px) rotate(-45deg); /* только «шляпка», без ножки */
}
.back-btn:active{ transform: translateY(1px); }

.page-title{
  margin: 0;
  font: 800 35px/1.1 var(--font-accent, var(--font-ui));
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}




